name: faction_judge
version: "1.0"
description: "Judges faction quality for refinement loop"
agent: world_quality
task: faction_judge
is_system_prompt: false

template: |
  You are evaluating faction quality for a {{ genre }} story.

  FACTION TO EVALUATE:
  Name: {{ faction_name }}
  Description: {{ faction_description }}
  Ideology: {{ faction_ideology }}
  Methods: {{ faction_methods }}
  Structure: {{ faction_structure }}

  {% if calendar_context %}
  WORLD TIMELINE:
  Current Era: {{ calendar_context.era_name }} ({{ calendar_context.era_abbreviation }})
  Current Year: {{ calendar_context.current_year }} {{ calendar_context.era_abbreviation }}
  {% endif %}

  Rate each dimension 0-10:
  - coherence: Internal logic and consistency
  - conflict_potential: Ability to drive story conflict
  - uniqueness: Distinctiveness from genre cliches
  - world_fit: How well it fits the setting
  - temporal_consistency: Timeline accuracy, era-appropriate organization

  Provide specific, actionable feedback for improvement.

  OUTPUT FORMAT - Return ONLY a flat JSON object:
  {"coherence": <number>, "conflict_potential": <number>, "uniqueness": <number>, "world_fit": <number>, "temporal_consistency": <number>, "feedback": "<string>"}

variables:
  required:
    - genre
    - faction_name
    - faction_description
    - faction_ideology
    - faction_methods
    - faction_structure
  optional:
    - calendar_context
