name: concept_refine
version: "1.0"
description: "Refines a concept based on quality feedback"
agent: world_quality
task: concept_refine
is_system_prompt: false

template: |
  Improve this concept based on quality feedback.

  IMPORTANT GUIDELINES:
  - Make targeted, minimal changes - do not rewrite the entire concept
  - Preserve aspects that scored well in the evaluation
  - Focus improvement on the 1-2 lowest-scoring dimensions only
  - Keep the concept's core identity, name, and distinguishing features intact

  ORIGINAL CONCEPT:
  Name: {{ concept_name }}
  Description: {{ concept_description }}
  Rules: {{ concept_rules }}
  Impact: {{ concept_impact }}
  Thematic Role: {{ concept_thematic_role }}

  QUALITY SCORES (0-10):
  - Coherence: {{ scores.coherence }}
  - Thematic Fit: {{ scores.thematic_fit }}
  - Uniqueness: {{ scores.uniqueness }}
  - Usability: {{ scores.usability }}

  FEEDBACK: {{ scores.feedback }}

  WEAK AREAS TO IMPROVE: {{ weak_dimensions | join(", ") if weak_dimensions else "None - minor improvements only" }}

  Keep the name "{{ concept_name }}", but enhance only the weak areas.
  Make the concept more compelling while maintaining consistency.
  Write all text in {{ language }}.

variables:
  required:
    - concept_name
    - concept_description
    - concept_rules
    - concept_impact
    - concept_thematic_role
    - scores
    - language
  optional:
    - weak_dimensions
