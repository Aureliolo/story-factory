name: relationship_refine
version: "1.0"
description: "Refines a relationship based on quality feedback"
agent: world_quality
task: relationship_refine
is_system_prompt: false

template: |
  Improve this relationship based on quality feedback.

  ORIGINAL RELATIONSHIP:
  Source: {{ source_name }}
  Target: {{ target_name }}
  Type: {{ relation_type }}
  Description: {{ relationship_description }}
  History: {{ relationship_history }}
  Tension: {{ relationship_tension }}

  QUALITY SCORES (0-10):
  - Depth: {{ scores.depth }}
  - Conflict Potential: {{ scores.conflict_potential }}
  - Believability: {{ scores.believability }}
  - Uniqueness: {{ scores.uniqueness }}

  FEEDBACK: {{ scores.feedback }}

  WEAK AREAS TO IMPROVE: {{ weak_dimensions | join(", ") if weak_dimensions else "None - minor improvements only" }}

  Keep the source "{{ source_name }}" and target "{{ target_name }}", but enhance the weak areas.
  Make the relationship more compelling while maintaining consistency.
  Write all text in {{ language }}.

variables:
  required:
    - source_name
    - target_name
    - relation_type
    - relationship_description
    - relationship_history
    - relationship_tension
    - scores
    - language
  optional:
    - weak_dimensions
